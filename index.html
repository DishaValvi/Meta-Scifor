<!DOCTYPE html>
<html>
<head>
    <title>Loan Approval Prediction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="container">
    <h2>üè¶ Loan Approval Prediction</h2>
    <form id="loanForm">
        <label>Gender:</label>
        <select name="Gender" required>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
        </select>

        <label>Married:</label>
        <select name="Married" required>
            <option value="Yes">Yes</option>
            <option value="No">No</option>
        </select>

        <label>Dependents:</label>
        <select name="Dependents" required>
            <option value="0">0</option><option value="1">1</option>
            <option value="2">2</option><option value="3+">3+</option>
        </select>

        <label>Education:</label>
        <select name="Education" required>
            <option value="Graduate">Graduate</option>
            <option value="Not Graduate">Not Graduate</option>
        </select>

        <label>Self Employed:</label>
        <select name="Self_Employed" required>
            <option value="Yes">Yes</option>
            <option value="No">No</option>
        </select>

        <label>Applicant Income:</label>
        <input type="number" name="ApplicantIncome" min="0" required>

        <label>Coapplicant Income:</label>
        <input type="number" name="CoapplicantIncome" min="0" required>

        <label>Loan Amount:</label>
        <input type="number" name="LoanAmount" min="0" required>

        <label>Loan Amount Term (days):</label>
        <input type="number" name="Loan_Amount_Term" min="0" required>

        <label>Credit History:</label>
        <select name="Credit_History" required>
            <option value="1.0">Good (1)</option>
            <option value="0.0">Bad (0)</option>
        </select>

        <label>Property Area:</label>
        <select name="Property_Area" required>
            <option value="Urban">Urban</option>
            <option value="Semiurban">Semiurban</option>
            <option value="Rural">Rural</option>
        </select>

        <button type="submit">Check Approval</button>
    </form>

    <div id="result"></div>
</div>

<script>
document.getElementById("loanForm").addEventListener("submit", function(e) {
    e.preventDefault();
    let formData = {};
    new FormData(this).forEach((value, key) => formData[key] = value);

    fetch("/predict", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(formData)
    })
    .then(res => res.json())
    .then(data => {
        document.getElementById("result").innerHTML = `
            <div class="result-card">
                <h3>${data.prediction}</h3>
                <p>Confidence: ${data.probability}%</p>
            </div>
        `;
    });
});
</script>
</body>
</html>
